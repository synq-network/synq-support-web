// ============ Language pack ============
const I18N = {
  en: {
    help_center: "Help Center",
    hero_title: "How can we help?",
    hero_subtitle: "Find quick answers to common questions or get in touch with our support team.",
    popular_title: "Popular Questions",
    pq1_title: "What is Synq",
    pq1_desc: "Synq is a social app that helps people connect through sports and activities. It makes it easy to find events, join in, and meet new friends in real life.",
    pq2_title: "Our Purpose",
    pq2_desc: "Our purpose is to bring people together offline, encouraging real connections through shared passions. We believe sports and activities are the best way to build community and friendships.",
    pq3_title: "How It Started",
    pq3_desc: "Synq was created by a group of students and athletes who wanted a better way to organize games and meet people. It began as a simple idea and grew into a platform for anyone who loves to be active.",
    faq_title: "Frequently Asked Questions",

    f1_q: "Is the app available on my phone?",
    f1_a:
      "Yes. Synq is available for download on both Apple and Android devices through the App Store and Google Play Store.",
    f2_q: "How do I join an event?",
    f2_a:
      "Open the Discover page, select Events, and swipe right on the ones you want to join—or tap + to create your own. You can also be invited through group chats with your friends.",
    f3_q: "How do I add friends?",
    f3_a:
      "You can connect by matching through events, using our people-matching algorithm, or by proximity sync (bringing your phones together when you meet in person).",
    f4_q: "Is the app free?",
    f4_a:
      "Yes, the app is completely free to use and contains no ads or any commercial content",
    f5_q: "Do I need to be verified?",
    f5_a:
      "Verification is optional, but it helps build trust and credibility in the community.",
    f6_q: "Can I see who viewed my profile?",
    f6_a:
      "No, you cannot see who viewed your profile. You’ll only see actual interactions like matches, event joins, or messages.",
    f7_q: "What happens if an event is full?",
    f7_a:
      "Every event has a set capacity. If more people apply, the host chooses who to accept. Once the capacity is reached, the event disappears from Discover.",
    f8_q: "How do notifications work?",
    f8_a:
      "Notifications are all organized in the Notification Hub on your Flow page, so you stay updated without getting spammed.",  
    f9_q: "Can I hide my profile from Discover and still use the app?",
    f9_a:
      "Yes. You can disable your profile from appearing in the People section of Discover and still join events, be part of teams, and use all other features.",
    f10_q: "Can I delete my account?",
    f10_a:
      "Yes. Go to Profile → Settings → Delete Account to permanently remove your data.",
    
    contact_title: "Still need help?",
    contact_text: "Our support team is here to help you get the most out of Synq.",
    contact_button: "Contact Support",
    status: "All systems operational",
    tos: "Terms of Service",
    privacy: "Privacy Policy",
    release: "Release Notes",
    contact_options_title: "Contact options",
    email_label: "Email",
    phone_label: "Phone",
  },
  fr: {
    help_center: "Centre d’aide",
    hero_title: "Comment pouvons-nous vous aider ?",
    hero_subtitle: "Trouvez rapidement des réponses aux questions courantes ou contactez notre équipe de support.",
    popular_title: "Questions populaires",
    pq1_title: "Qu’est-ce que Synq",
    pq1_desc: "Synq est une application sociale qui aide les gens à se connecter grâce au sport et aux activités. Elle permet de trouver facilement des événements, d’y participer et de rencontrer de nouveaux amis dans la vie réelle.",
    pq2_title: "Notre objectif",
    pq2_desc: "Notre objectif est de rassembler les gens hors ligne et de favoriser de vraies connexions grâce à des passions partagées. Nous croyons que le sport et les activités sont la meilleure façon de créer des amitiés et une communauté.",
    pq3_title: "Comment tout a commencé",
    pq3_desc: "Synq a été créée par un groupe d’étudiants et d’athlètes qui voulaient une meilleure façon d’organiser des matchs et de rencontrer des gens. C’était d’abord une idée simple qui est devenue une plateforme pour tous ceux qui aiment bouger.",
    faq_title: "Foire aux questions",

    f1_q: "L’application est-elle disponible sur mon téléphone ?",
    f1_a:
      "Oui. Synq est disponible au téléchargement sur les appareils Apple et Android via l’App Store et Google Play Store.",
    f2_q: "Comment puis-je rejoindre un événement ?",
    f2_a:
      "Ouvrez la page Découvrir, sélectionnez Événements et balayez vers la droite sur ceux auxquels vous souhaitez participer — ou appuyez sur + pour créer le vôtre. Vous pouvez aussi être invité via des discussions de groupe avec vos amis.",
    f3_q: "Comment puis-je ajouter des amis ?",
    f3_a:
      "Vous pouvez vous connecter en participant aux mêmes événements, via notre algorithme de mise en relation, ou par synchronisation de proximité (rapprochez vos téléphones lorsque vous vous rencontrez en personne).",
    f4_q: "L’application est-elle gratuite ?",
    f4_a:
      "Oui, l’application est entièrement gratuite et ne contient aucune publicité ni contenu commercial.",
    f5_q: "Dois-je être vérifié ?",
    f5_a:
      "La vérification est optionnelle, mais elle permet d’inspirer confiance et de renforcer votre crédibilité dans la communauté.",
    f6_q: "Puis-je voir qui a consulté mon profil ?",
    f6_a:
      "Non, vous ne pouvez pas voir qui a consulté votre profil. Vous verrez uniquement les interactions réelles comme les mises en relation, les participations aux événements ou les messages.",
    f7_q: "Que se passe-t-il si un événement est complet ?",
    f7_a:
      "Chaque événement a une capacité définie. Si plus de personnes postulent, l’organisateur choisit qui accepter. Une fois la capacité atteinte, l’événement disparaît de la page Découvrir.",
    f8_q: "Comment fonctionnent les notifications ?",
    f8_a:
      "Toutes les notifications sont regroupées dans le Hub de notifications sur votre page Flow, afin que vous restiez informé sans être dérangé.",
    f9_q: "Puis-je masquer mon profil de Découvrir et continuer à utiliser l’application ?",
    f9_a:
      "Oui. Vous pouvez désactiver l’affichage de votre profil dans la section Personnes de Découvrir et continuer à rejoindre des événements, faire partie d’équipes et utiliser toutes les autres fonctionnalités.",
    f10_q: "Puis-je supprimer mon compte ?",
    f10_a:
      "Oui. Allez dans Profil → Paramètres → Supprimer le compte pour effacer définitivement vos données.",

    contact_title: "Besoin d’aide supplémentaire ?",
    contact_text: "Notre équipe de support est là pour vous aider à profiter au maximum de Synq.",
    contact_button: "Contacter le support",
    status: "Tous les systèmes sont opérationnels",
    tos: "Conditions d’utilisation",
    privacy: "Politique de confidentialité",
    release: "Notes de version",
    contact_options_title: "Options de contact",
    email_label: "Courriel",
    phone_label: "Téléphone"
}
,
};

function applyLang(lang) {
  const dict = I18N[lang] || I18N.en;
  document.documentElement.setAttribute("lang", lang);
  document.documentElement.setAttribute("data-lang", lang);

  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (dict[key]) el.textContent = dict[key];
  });

  // Update language switch button states
  document.querySelectorAll(".lang").forEach((btn) => {
    const isActive = btn.getAttribute("data-lang") === lang;
    btn.classList.toggle("active", isActive);
    btn.setAttribute("aria-selected", String(isActive));
  });
  localStorage.setItem("synq_lang", lang);
}

// ============ FAQ expand/collapse with smooth height ============
function setupFAQ() {
  const items = document.querySelectorAll(".faq-item");
  items.forEach((item) => {
    const toggle = item.querySelector(".faq-toggle");
    const content = item.querySelector(".faq-content");

    // ensure collapsed height
    content.style.maxHeight = "0px";

    toggle.addEventListener("click", () => {
      const isOpen = item.classList.contains("active");

      // close all others (accordion behavior)
      document.querySelectorAll(".faq-item.active").forEach((openItem) => {
        openItem.classList.remove("active");
        const openContent = openItem.querySelector(".faq-content");
        const openToggle = openItem.querySelector(".faq-toggle");
        openContent.style.maxHeight = "0px";
        openToggle.setAttribute("aria-expanded", "false");
        openContent.setAttribute("aria-hidden", "true");
      });

      if (!isOpen) {
        item.classList.add("active");
        content.style.maxHeight = content.scrollHeight + "px";
        toggle.setAttribute("aria-expanded", "true");
        content.setAttribute("aria-hidden", "false");
      } else {
        item.classList.remove("active");
        content.style.maxHeight = "0px";
        toggle.setAttribute("aria-expanded", "false");
        content.setAttribute("aria-hidden", "true");
      }
    });
  });

  // adjust heights on resize for open items
  window.addEventListener("resize", () => {
    document.querySelectorAll(".faq-item.active .faq-content").forEach((c) => {
      c.style.maxHeight = c.scrollHeight + "px";
    });
  });
}

// ============ Contact section transform ============
function setupContact() {
  const card = document.getElementById("contact-card");
  const btn = document.getElementById("contact-cta");

  btn.addEventListener("click", () => {
    // Replace the inner content with compact contact options
    const lang = document.documentElement.getAttribute("data-lang") || "en";
    const d = I18N[lang] || I18N.en;

    card.classList.add("compact");
    card.innerHTML = `
      <div class="contact-inner">
        <h3 class="contact-title">${d.contact_options_title}</h3>
        <div class="contact-options">
          <div class="contact-option">
            <strong>${d.email_label}:</strong>
            <a href="mailto:synq.app.contact@gmail.com">synq.app.contact@gmail.com</a>
          </div>
          <div class="contact-option">
            <strong>${d.phone_label}:</strong>
            <span>+1 438 409 2408</span>
          </div>
        </div>
      </div>
    `;
  });
}

// ============ Language switch wiring ============
function setupLangSwitch() {
  document.querySelectorAll(".lang").forEach((btn) => {
    btn.addEventListener("click", () => {
      const lang = btn.getAttribute("data-lang");
      applyLang(lang);
    });
  });

  // restore saved language
  const saved = localStorage.getItem("synq_lang");
  applyLang(saved || "en");
}

// Init
document.addEventListener("DOMContentLoaded", () => {
  setupFAQ();
  setupContact();
  setupLangSwitch();
});
